<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  {% seo %}
  <link rel="stylesheet" href="{{ "/assets/css/style.css" | relative_url }}">
  {% feed_meta %}
  {% if jekyll.environment == 'production' and site.google_analytics %}
    {% include google-analytics.html %}
  {% endif %}
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.png">

  <!-- KaTeX 数学公式支持（使用 SRI 确保完整性） -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8" crossorigin="anonymous"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"
      onload="renderMathInElement(document.body, {
          delimiters: [
              {left: '$$', right: '$$', display: true},
              {left: '$', right: '$', display: false},
              {left: '\\(', right: '\\)', display: false},
              {left: '\\[', right: '\\]', display: true}
          ]
      });"></script>

  <!-- Netlify Identity Widget -->
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

  <!-- 外部脚本：登录重定向逻辑 -->
  <script src="{{ "/assets/js/auth-redirect.js" | relative_url }}" defer></script>

  <!-- 外部脚本：主题切换逻辑 -->
  <script src="{{ "/assets/js/theme.js" | relative_url }}" defer></script>

  <!-- 内容安全策略 (CSP) -->
  <meta http-equiv="Content-Security-Policy" content="
  default-src 'self';
  script-src 'self' https://identity.netlify.com https://cdn.jsdelivr.net 'unsafe-inline';
  style-src 'self' https://cdn.jsdelivr.net 'unsafe-inline';
  font-src 'self' https://cdn.jsdelivr.net;
  img-src 'self' data:;
  connect-src 'self' https://*.netlify.com https://*.netlify.app;
  frame-ancestors 'none';
  base-uri 'self';
  form-action 'self';
  ">
</head>