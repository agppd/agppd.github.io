<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  {% seo %}
  <link rel="stylesheet" href="{{ "/assets/css/style.css" | relative_url }}">
  {% feed_meta %}
  {% if jekyll.environment == 'production' and site.google_analytics %}
    {% include google-analytics.html %}
  {% endif %}
  <link rel="icon" type="image/png" href="/assets/image/favicon.png">
  <!-- KaTeX æ•°å­¦å…¬å¼æ”¯æŒ -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8" crossorigin="anonymous"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"
      onload="renderMathInElement(document.body, {
          delimiters: [
              {left: '$$', right: '$$', display: true},
              {left: '$', right: '$', display: false},
              {left: '\\(', right: '\\)', display: false},
              {left: '\\[', right: '\\]', display: true}
          ]
      });"></script>

  <!-- ä¸»é¢˜åˆ‡æ¢è„šæœ¬ï¼ˆå·²ç§»å…¥ head å†…ï¼‰ -->
  <script>
    (function() {
      const html = document.documentElement;
      const toggleBtn = document.getElementById('theme-toggle');
      if (!toggleBtn) return;

      // è¯»å– localStorage ä¸­çš„ä¸»é¢˜è®¾ç½®
      let savedTheme = localStorage.getItem('theme') || 'auto'; // 'auto', 'dark', 'light'

      // åº”ç”¨ä¿å­˜çš„ä¸»é¢˜
      function applyTheme(theme) {
        html.classList.remove('theme-dark', 'theme-light');
        if (theme === 'dark') {
          html.classList.add('theme-dark');
          toggleBtn.textContent = 'ðŸŒ™ æ·±è‰²';
        } else if (theme === 'light') {
          html.classList.add('theme-light');
          toggleBtn.textContent = 'â˜€ï¸ æµ…è‰²';
        } else {
          // auto: è·Ÿéšç³»ç»Ÿï¼Œä¸æ·»åŠ ä»»ä½•å¼ºåˆ¶ç±»
          toggleBtn.textContent = 'ðŸŒ“ è‡ªåŠ¨';
        }
        localStorage.setItem('theme', theme);
      }

      applyTheme(savedTheme);

      // ç‚¹å‡»æŒ‰é’®å¾ªçŽ¯åˆ‡æ¢ï¼šauto -> dark -> light -> auto
      toggleBtn.addEventListener('click', () => {
        let current = localStorage.getItem('theme') || 'auto';
        if (current === 'auto') {
          applyTheme('dark');
        } else if (current === 'dark') {
          applyTheme('light');
        } else {
          applyTheme('auto');
        }
      });
    })();
  </script>
</head>